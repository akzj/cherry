# Cherry é¡¹ç›®æ¶æ„æ–‡æ¡£

## ğŸ¤– AI å¿«é€Ÿç†è§£æŒ‡å—

**é¡¹ç›®èƒŒæ™¯**: Cherryæ˜¯ä¸€ä¸ªæ¡Œé¢èŠå¤©åº”ç”¨ï¼Œé‡‡ç”¨Tauri+React+TypeScriptæŠ€æœ¯æ ˆï¼Œæ”¯æŒè·¨å¹³å°éƒ¨ç½²ã€‚

**æ ¸å¿ƒè®¾è®¡å†³ç­–**:
1. **æœåŠ¡å±‚æŠ½è±¡**: æ‰€æœ‰å¤–éƒ¨ä¾èµ–é€šè¿‡æœåŠ¡å±‚æŠ½è±¡ï¼Œæ”¯æŒMock/Tauriç¯å¢ƒåˆ‡æ¢
2. **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰ï¼Œç¡®ä¿ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
3. **çŠ¶æ€ç®¡ç†**: ä½¿ç”¨Zustandè¿›è¡Œè½»é‡çº§çŠ¶æ€ç®¡ç†
4. **ç»„ä»¶åŒ–**: æ¸…æ™°çš„ç»„ä»¶å±‚æ¬¡å’ŒèŒè´£åˆ†ç¦»

**AIå¼€å‘è¦ç‚¹**:
- ä¸šåŠ¡ä»£ç æ°¸è¿œåªå¯¼å…¥æœåŠ¡å±‚ç»Ÿä¸€å…¥å£ï¼Œä¸å…³å¿ƒå…·ä½“å®ç°
- æ‰€æœ‰ç±»å‹å®šä¹‰åœ¨`@/types`ä¸­ç»Ÿä¸€ç®¡ç†
- ç»„ä»¶éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼ŒUIå’Œä¸šåŠ¡é€»è¾‘åˆ†ç¦»
- é”™è¯¯å¤„ç†ç»Ÿä¸€ä½¿ç”¨ServiceErrorç±»å‹

**å¿«é€Ÿå¯¼èˆª**:
- éœ€è¦äº†è§£æ•´ä½“æ¶æ„ â†’ æŸ¥çœ‹æœ¬æ–‡æ¡£
- éœ€è¦äº†è§£æœåŠ¡å±‚è®¾è®¡ â†’ æŸ¥çœ‹ `src/services/README.md`
- éœ€è¦äº†è§£ç±»å‹ç³»ç»Ÿ â†’ æŸ¥çœ‹ `src/types/README.md`
- éœ€è¦äº†è§£å¼€å‘è§„èŒƒ â†’ æŸ¥çœ‹ `CODING_STANDARDS.md`
- éœ€è¦AIç¼–ç¨‹æŒ‡å— â†’ æŸ¥çœ‹ `AI_GUIDE.md`

## ğŸ“‹ æ¦‚è¿°

Cherry æ˜¯ä¸€ä¸ªåŸºäº Tauri + React + TypeScript çš„ç°ä»£åŒ–æ¡Œé¢èŠå¤©åº”ç”¨ï¼Œé‡‡ç”¨æ¨¡å—åŒ–ã€å¯æ‰©å±•çš„æ¶æ„è®¾è®¡ï¼Œæ”¯æŒè·¨å¹³å°éƒ¨ç½²ã€‚

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Cherry åº”ç”¨æ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    UI Layer     â”‚  â”‚  Business Layer â”‚  â”‚  Service Layer  â”‚ â”‚
â”‚  â”‚   (React)       â”‚  â”‚   (Store)       â”‚  â”‚   (Tauri/Mock)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Type System    â”‚  â”‚   Utilities     â”‚  â”‚   Hooks         â”‚ â”‚
â”‚  â”‚   (TypeScript)  â”‚  â”‚   (Utils)       â”‚  â”‚   (Custom)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Tauri Runtime Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   File System   â”‚  â”‚   Network       â”‚  â”‚   Database      â”‚ â”‚
â”‚  â”‚   (Native)      â”‚  â”‚   (HTTP/WS)     â”‚  â”‚   (SQLite)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ main.tsx                    # åº”ç”¨å…¥å£
â”œâ”€â”€ App.tsx                     # æ ¹ç»„ä»¶
â”œâ”€â”€ App.styles.ts              # æ ¹ç»„ä»¶æ ·å¼
â”œâ”€â”€ App.stories.tsx            # Storybook æ•…äº‹
â”œâ”€â”€ index.css                  # å…¨å±€æ ·å¼
â”œâ”€â”€ vite-env.d.ts             # Vite ç±»å‹å£°æ˜
â”‚
â”œâ”€â”€ types/                     # ç±»å‹å®šä¹‰ç³»ç»Ÿ
â”‚   â”œâ”€â”€ README.md             # ç±»å‹ç³»ç»Ÿæ–‡æ¡£
â”‚   â”œâ”€â”€ index.ts              # ç»Ÿä¸€å¯¼å‡ºå…¥å£
â”‚   â”œâ”€â”€ core.ts               # æ ¸å¿ƒåŸºç¡€ç±»å‹
â”‚   â”œâ”€â”€ api.ts                # APIç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ ui.ts                 # UIç»„ä»¶ç±»å‹
â”‚   â”œâ”€â”€ typeUtils.ts          # ç±»å‹å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ models/               # æ•°æ®æ¨¡å‹ç±»å‹
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ user.ts           # ç”¨æˆ·ç±»å‹
â”‚       â”œâ”€â”€ message.ts        # æ¶ˆæ¯ç±»å‹
â”‚       â”œâ”€â”€ conversation.ts   # ä¼šè¯ç±»å‹
â”‚       â”œâ”€â”€ contact.ts        # è”ç³»äººç±»å‹
â”‚       â”œâ”€â”€ settings.ts       # è®¾ç½®ç±»å‹
â”‚       â””â”€â”€ login.ts          # ç™»å½•ç±»å‹
â”‚
â”œâ”€â”€ services/                  # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ authService/          # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ tauriImpl.ts
â”‚   â”‚   â”œâ”€â”€ mockImpl.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ contactService/       # è”ç³»äººæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ tauriImpl.ts
â”‚   â”‚   â”œâ”€â”€ mockImpl.ts
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â””â”€â”€ db.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ messageService/       # æ¶ˆæ¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ tauriImpl.ts
â”‚   â”‚   â”œâ”€â”€ mockImpl.ts
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â”œâ”€â”€ db.ts
â”‚   â”‚   â”‚   â””â”€â”€ setup-localstorage.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ conversationService/  # ä¼šè¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ tauriImpl.ts
â”‚   â”‚   â”œâ”€â”€ mockImpl.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ fileService/          # æ–‡ä»¶æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ tauriImpl.ts
â”‚   â”‚   â”œâ”€â”€ mockImpl.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ eventService/         # äº‹ä»¶æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ tauriImpl.ts
â”‚   â”‚   â”œâ”€â”€ mockImpl.ts
â”‚   â”‚   â”œâ”€â”€ README.md
â”‚   â”‚   â”œâ”€â”€ __tests__/
â”‚   â”‚   â”œâ”€â”€ examples/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ windowService/        # çª—å£æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ tauriImpl.ts
â”‚   â”‚   â”œâ”€â”€ mockImpl.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ mock/                 # Mock åŸºç¡€è®¾æ–½
â”‚       â””â”€â”€ LocalDbAdapter.ts
â”‚
â”œâ”€â”€ store/                    # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ auth.ts              # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ contact.ts           # è”ç³»äººçŠ¶æ€
â”‚   â”œâ”€â”€ conversation.ts      # ä¼šè¯çŠ¶æ€
â”‚   â”œâ”€â”€ notification.ts      # é€šçŸ¥çŠ¶æ€
â”‚   â””â”€â”€ readPosition.ts      # é˜…è¯»ä½ç½®çŠ¶æ€
â”‚
â”œâ”€â”€ components/               # UI ç»„ä»¶
â”‚   â”œâ”€â”€ UI/                  # åŸºç¡€ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ Avatar.tsx
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ EmptyState.tsx
â”‚   â”‚   â”œâ”€â”€ ErrorMessage.tsx
â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.tsx
â”‚   â”‚   â””â”€â”€ QuickEmojiReply.tsx
â”‚   â”œâ”€â”€ ContactPage/         # è”ç³»äººé¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ ContactGroup.tsx
â”‚   â”‚   â”œâ”€â”€ ContactItem.tsx
â”‚   â”‚   â”œâ”€â”€ ContactProfileModal.tsx
â”‚   â”‚   â””â”€â”€ GroupSection.tsx
â”‚   â”œâ”€â”€ settings/            # è®¾ç½®é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SettingsPage.tsx
â”‚   â”‚   â”œâ”€â”€ GeneralSettings.tsx
â”‚   â”‚   â”œâ”€â”€ PrivacySettings.tsx
â”‚   â”‚   â”œâ”€â”€ NotificationSettings.tsx
â”‚   â”‚   â””â”€â”€ AppearanceSettings.tsx
â”‚   â”œâ”€â”€ login/               # ç™»å½•ç»„ä»¶
â”‚   â”œâ”€â”€ App.tsx              # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Sidebar.tsx          # ä¾§è¾¹æ 
â”‚   â”œâ”€â”€ ChatHeader.tsx       # èŠå¤©å¤´éƒ¨
â”‚   â”œâ”€â”€ ConversationView.tsx # ä¼šè¯è§†å›¾
â”‚   â”œâ”€â”€ MessageListSimple.tsx # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”œâ”€â”€ MessageInput.tsx     # æ¶ˆæ¯è¾“å…¥
â”‚   â”œâ”€â”€ ContactList.tsx      # è”ç³»äººåˆ—è¡¨
â”‚   â”œâ”€â”€ StatusBar.tsx        # çŠ¶æ€æ 
â”‚   â”œâ”€â”€ WindowControls.tsx   # çª—å£æ§åˆ¶
â”‚   â”œâ”€â”€ NotificationManager.tsx # é€šçŸ¥ç®¡ç†
â”‚   â”œâ”€â”€ NotificationToast.tsx # é€šçŸ¥æç¤º
â”‚   â”œâ”€â”€ EmojiPicker.tsx      # è¡¨æƒ…é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ ImageUploader.tsx    # å›¾ç‰‡ä¸Šä¼ 
â”‚   â”œâ”€â”€ ImageMessage.tsx     # å›¾ç‰‡æ¶ˆæ¯
â”‚   â”œâ”€â”€ ReplyMessage.tsx     # å›å¤æ¶ˆæ¯
â”‚   â”œâ”€â”€ MessageDebug.tsx     # æ¶ˆæ¯è°ƒè¯•
â”‚   â”œâ”€â”€ DebugPanel.tsx       # è°ƒè¯•é¢æ¿
â”‚   â””â”€â”€ ...                  # å…¶ä»–ç»„ä»¶
â”‚
â”œâ”€â”€ hooks/                   # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ useMessageReceiver.ts # æ¶ˆæ¯æ¥æ”¶ Hook
â”‚   â””â”€â”€ useWindowsSize.ts    # çª—å£å°ºå¯¸ Hook
â”‚
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”œâ”€â”€ assets/                  # é™æ€èµ„æº
â”œâ”€â”€ svg/                     # SVG å›¾æ ‡
â””â”€â”€ stories/                 # Storybook æ•…äº‹
```

## ğŸ”„ æ•°æ®æµæ¶æ„

### 1. å•å‘æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Service   â”‚â”€â”€â”€â–¶â”‚    Store    â”‚â”€â”€â”€â–¶â”‚  Component  â”‚
â”‚   Layer     â”‚    â”‚   (State)   â”‚    â”‚     UI      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                   â”‚                   â”‚
       â”‚                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend   â”‚    â”‚   Actions   â”‚    â”‚   Events    â”‚
â”‚   (Tauri)   â”‚    â”‚  (Zustand)  â”‚    â”‚  (User)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æœåŠ¡å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Service Layer                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Auth      â”‚  â”‚  Contact    â”‚  â”‚  Message    â”‚         â”‚
â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚Conversation â”‚  â”‚   File      â”‚  â”‚   Event     â”‚         â”‚
â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Tauri      â”‚  â”‚   Mock      â”‚  â”‚   Index     â”‚         â”‚
â”‚  â”‚  Impl       â”‚  â”‚   Impl      â”‚  â”‚  (Router)   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 1. åˆ†å±‚æ¶æ„
- **UI Layer**: React ç»„ä»¶ï¼Œè´Ÿè´£ç•Œé¢æ¸²æŸ“
- **Business Layer**: Zustand Storeï¼Œè´Ÿè´£ä¸šåŠ¡é€»è¾‘
- **Service Layer**: æŠ½è±¡æœåŠ¡ï¼Œè´Ÿè´£æ•°æ®è®¿é—®
- **Platform Layer**: Tauri/Mockï¼Œè´Ÿè´£å¹³å°é€‚é…

### 2. ä¾èµ–å€’ç½®
- é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—
- é€šè¿‡æ¥å£è¿›è¡Œä¾èµ–
- æ”¯æŒè¿è¡Œæ—¶åˆ‡æ¢å®ç°

### 3. å•ä¸€èŒè´£
- æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½åŸŸ
- æœåŠ¡å±‚æŒ‰ä¸šåŠ¡åŠŸèƒ½åˆ’åˆ†
- ç»„ä»¶æŒ‰UIåŠŸèƒ½åˆ’åˆ†

### 4. å¼€é—­åŸåˆ™
- å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­
- é€šè¿‡æ¥å£å’ŒæŠ½è±¡æ”¯æŒæ‰©å±•
- ä¿æŒå‘åå…¼å®¹

## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: React 18 + TypeScript
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æ ·å¼**: Styled Components
- **æ„å»ºå·¥å…·**: Vite
- **æµ‹è¯•**: Storybook + Jest

### æ¡Œé¢æŠ€æœ¯
- **æ¡†æ¶**: Tauri
- **åç«¯**: Rust
- **æ•°æ®åº“**: SQLite
- **ç½‘ç»œ**: HTTP/WebSocket

### å¼€å‘å·¥å…·
- **åŒ…ç®¡ç†**: npm
- **ä»£ç è§„èŒƒ**: ESLint + Prettier
- **ç±»å‹æ£€æŸ¥**: TypeScript
- **æ–‡æ¡£**: Markdown

## ğŸ“Š æ¨¡å—èŒè´£

### æœåŠ¡å±‚ (Services)

#### AuthService - è®¤è¯æœåŠ¡
- **èŒè´£**: ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€Tokenç®¡ç†
- **æ¥å£**: `login()`, `logout()`, `validateToken()`
- **å®ç°**: Tauri API / Mock

#### ContactService - è”ç³»äººæœåŠ¡
- **èŒè´£**: è”ç³»äººç®¡ç†ã€ç¾¤ç»„ç®¡ç†
- **æ¥å£**: `listAllContacts()`, `search()`, `createGroup()`
- **å®ç°**: Tauri API / Mock + LocalStorage

#### MessageService - æ¶ˆæ¯æœåŠ¡
- **èŒè´£**: æ¶ˆæ¯å‘é€ã€æ¥æ”¶ã€å†å²è®°å½•
- **æ¥å£**: `sendMessage()`, `loadMessages()`
- **å®ç°**: Tauri API / Mock + LocalStorage

#### ConversationService - ä¼šè¯æœåŠ¡
- **èŒè´£**: ä¼šè¯ç®¡ç†ã€ä¼šè¯åˆ—è¡¨
- **æ¥å£**: `listAllConversations()`, `createConversation()`
- **å®ç°**: Tauri API / Mock

#### FileService - æ–‡ä»¶æœåŠ¡
- **èŒè´£**: æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€ç®¡ç†
- **æ¥å£**: `uploadFile()`, `downloadFile()`, `exists()`
- **å®ç°**: Tauri File API / Mock

#### EventService - äº‹ä»¶æœåŠ¡
- **èŒè´£**: å®æ—¶äº‹ä»¶å¤„ç†ã€WebSocketç®¡ç†
- **æ¥å£**: `subscribe()`, `unsubscribe()`, `emit()`
- **å®ç°**: Tauri Event API / Mock

### çŠ¶æ€ç®¡ç†å±‚ (Store)

#### AuthStore - è®¤è¯çŠ¶æ€
- **çŠ¶æ€**: ç”¨æˆ·ä¿¡æ¯ã€ç™»å½•çŠ¶æ€ã€Token
- **æ–¹æ³•**: `login()`, `logout()`, `refreshToken()`

#### ContactStore - è”ç³»äººçŠ¶æ€
- **çŠ¶æ€**: è”ç³»äººåˆ—è¡¨ã€ç¾¤ç»„åˆ—è¡¨ã€æœç´¢çŠ¶æ€
- **æ–¹æ³•**: `refreshContacts()`, `searchContacts()`, `createGroup()`

#### ConversationStore - ä¼šè¯çŠ¶æ€
- **çŠ¶æ€**: ä¼šè¯åˆ—è¡¨ã€å½“å‰ä¼šè¯ã€æ¶ˆæ¯åˆ—è¡¨
- **æ–¹æ³•**: `refreshConversations()`, `selectConversation()`

#### NotificationStore - é€šçŸ¥çŠ¶æ€
- **çŠ¶æ€**: é€šçŸ¥åˆ—è¡¨ã€æœªè¯»æ•°é‡
- **æ–¹æ³•**: `addNotification()`, `markAsRead()`

### UIç»„ä»¶å±‚ (Components)

#### åŸºç¡€ç»„ä»¶ (UI/)
- **Avatar**: ç”¨æˆ·å¤´åƒ
- **Button**: æŒ‰é’®ç»„ä»¶
- **LoadingSpinner**: åŠ è½½åŠ¨ç”»
- **ErrorMessage**: é”™è¯¯æç¤º

#### é¡µé¢ç»„ä»¶
- **ContactPage**: è”ç³»äººé¡µé¢
- **SettingsPage**: è®¾ç½®é¡µé¢
- **LoginPage**: ç™»å½•é¡µé¢

#### åŠŸèƒ½ç»„ä»¶
- **MessageInput**: æ¶ˆæ¯è¾“å…¥
- **MessageList**: æ¶ˆæ¯åˆ—è¡¨
- **EmojiPicker**: è¡¨æƒ…é€‰æ‹©å™¨
- **ImageUploader**: å›¾ç‰‡ä¸Šä¼ 

## ğŸ”„ æ•°æ®æµç¤ºä¾‹

### å‘é€æ¶ˆæ¯æµç¨‹

```
1. User Input (MessageInput)
   â†“
2. MessageInput.onSend()
   â†“
3. messageService.sendMessage()
   â†“
4. tauriImpl.sendMessage() / mockImpl.sendMessage()
   â†“
5. Backend API / LocalStorage
   â†“
6. EventService.emit('message_sent')
   â†“
7. conversationStore.addMessage()
   â†“
8. MessageList re-render
```

### æ¥æ”¶æ¶ˆæ¯æµç¨‹

```
1. WebSocket Event / Mock Event
   â†“
2. EventService.handleMessage()
   â†“
3. conversationStore.addMessage()
   â†“
4. NotificationStore.addNotification()
   â†“
5. MessageList re-render
   â†“
6. NotificationToast.show()
```

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†

### åˆ†å±‚é”™è¯¯å¤„ç†
1. **Service Layer**: æ•è·APIé”™è¯¯ï¼Œè½¬æ¢ä¸ºç»Ÿä¸€æ ¼å¼
2. **Store Layer**: å¤„ç†ä¸šåŠ¡é€»è¾‘é”™è¯¯ï¼Œæ›´æ–°é”™è¯¯çŠ¶æ€
3. **UI Layer**: æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæä¾›é‡è¯•æœºåˆ¶

### é”™è¯¯ç±»å‹
- **NetworkError**: ç½‘ç»œè¿æ¥é”™è¯¯
- **AuthError**: è®¤è¯ç›¸å…³é”™è¯¯
- **ValidationError**: æ•°æ®éªŒè¯é”™è¯¯
- **SystemError**: ç³»ç»Ÿçº§é”™è¯¯

## ğŸ”§ é…ç½®ç®¡ç†

### ç¯å¢ƒé…ç½®
- **å¼€å‘ç¯å¢ƒ**: MockæœåŠ¡ï¼Œæœ¬åœ°å­˜å‚¨
- **ç”Ÿäº§ç¯å¢ƒ**: TauriæœåŠ¡ï¼ŒSQLiteæ•°æ®åº“
- **æµ‹è¯•ç¯å¢ƒ**: MockæœåŠ¡ï¼Œå†…å­˜å­˜å‚¨

### åŠŸèƒ½å¼€å…³
- **è°ƒè¯•æ¨¡å¼**: æ˜¾ç¤ºè°ƒè¯•é¢æ¿
- **Mockæ¨¡å¼**: ä½¿ç”¨MockæœåŠ¡
- **ç¦»çº¿æ¨¡å¼**: æœ¬åœ°å­˜å‚¨ä¼˜å…ˆ

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ä»£ç åˆ†å‰²
- æŒ‰è·¯ç”±åˆ†å‰²ç»„ä»¶
- æŒ‰åŠŸèƒ½åˆ†å‰²æœåŠ¡
- æ‡’åŠ è½½éå…³é”®ç»„ä»¶

### çŠ¶æ€ä¼˜åŒ–
- å±€éƒ¨çŠ¶æ€ç®¡ç†
- çŠ¶æ€é€‰æ‹©å™¨ä¼˜åŒ–
- é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

### ç¼“å­˜ç­–ç•¥
- æ¶ˆæ¯å†å²ç¼“å­˜
- è”ç³»äººä¿¡æ¯ç¼“å­˜
- å›¾ç‰‡èµ„æºç¼“å­˜

## ğŸ”® æ‰©å±•æ€§è®¾è®¡

### æ’ä»¶ç³»ç»Ÿ
- æœåŠ¡å±‚æ’ä»¶æ¥å£
- UIç»„ä»¶æ’ä»¶æ¥å£
- ä¸»é¢˜ç³»ç»Ÿæ’ä»¶

### å›½é™…åŒ–
- å¤šè¯­è¨€æ”¯æŒ
- åŠ¨æ€è¯­è¨€åˆ‡æ¢
- æœ¬åœ°åŒ–èµ„æºç®¡ç†

### ä¸»é¢˜ç³»ç»Ÿ
- åŠ¨æ€ä¸»é¢˜åˆ‡æ¢
- è‡ªå®šä¹‰ä¸»é¢˜æ”¯æŒ
- ä¸»é¢˜é…ç½®æŒä¹…åŒ–

## ğŸ“š å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½
1. å®šä¹‰ç±»å‹ (`types/models/`)
2. åˆ›å»ºæœåŠ¡ (`services/`)
3. æ›´æ–°çŠ¶æ€ (`store/`)
4. å¼€å‘ç»„ä»¶ (`components/`)
5. ç¼–å†™æµ‹è¯• (`__tests__/`)

### ä»£ç è§„èŒƒ
- éµå¾ªTypeScriptä¸¥æ ¼æ¨¡å¼
- ä½¿ç”¨ESLint + Prettier
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°æ–‡æ¡£

### æäº¤è§„èŒƒ
- ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯
- åŒ…å«æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°ç›¸å…³æ–‡æ¡£

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2025-07-13  
**ç»´æŠ¤è€…**: Cherry Team 
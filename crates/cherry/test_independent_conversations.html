<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‹¬ç«‹ä¼šè¯ç»„ä»¶æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .architecture-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .section-title {
            color: white;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .benefit {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .benefit:before {
            content: "âœ…";
            position: absolute;
            left: 0;
        }
        
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            color: #4ade80;
            overflow-x: auto;
            font-size: 14px;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .old-way, .new-way {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
        }
        
        .old-way {
            border-left: 4px solid #ef4444;
        }
        
        .new-way {
            border-left: 4px solid #22c55e;
        }
        
        .way-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: white;
        }
        
        .way-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            line-height: 1.5;
        }
        
        .test-steps {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .test-title {
            color: #3b82f6;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .test-step {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 8px;
            padding-left: 15px;
            position: relative;
        }
        
        .test-step:before {
            content: "ğŸ§ª";
            position: absolute;
            left: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—ï¸ ç‹¬ç«‹ä¼šè¯ç»„ä»¶æ¶æ„</h1>
        
        <div class="architecture-section">
            <div class="section-title">
                ğŸ¯ æ–°æ¶æ„çš„æ ¸å¿ƒæ€æƒ³
            </div>
            <div class="benefit">æ¯ä¸ªä¼šè¯éƒ½æ˜¯ç‹¬ç«‹çš„ç»„ä»¶å®ä¾‹ï¼Œæ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€å’Œæ»šåŠ¨ä½ç½®</div>
            <div class="benefit">åˆ‡æ¢ä¼šè¯åªæ˜¯æ”¹å˜ç»„ä»¶çš„å¯è§æ€§ï¼ˆdisplay: none/flexï¼‰</div>
            <div class="benefit">ä¸å†éœ€è¦å¤æ‚çš„æ»šåŠ¨ä½ç½®ä¿å­˜å’Œæ¢å¤é€»è¾‘</div>
            <div class="benefit">æ¯ä¸ªç»„ä»¶çš„DOMçŠ¶æ€è‡ªç„¶ä¿æŒï¼ŒåŒ…æ‹¬æ»šåŠ¨ä½ç½®</div>
            <div class="benefit">æ›´ç®€å•ã€æ›´å¯é ã€æ€§èƒ½æ›´å¥½</div>
        </div>
        
        <div class="architecture-section">
            <div class="section-title">
                ğŸ”„ æ¶æ„å¯¹æ¯”
            </div>
            <div class="comparison">
                <div class="old-way">
                    <div class="way-title">âŒ æ—§æ–¹å¼</div>
                    <div class="way-description">
                        â€¢ å•ä¸€MessageListç»„ä»¶<br>
                        â€¢ åˆ‡æ¢ä¼šè¯æ—¶é‡æ–°æ¸²æŸ“<br>
                        â€¢ æ‰‹åŠ¨ä¿å­˜/æ¢å¤æ»šåŠ¨ä½ç½®<br>
                        â€¢ å¤æ‚çš„çŠ¶æ€ç®¡ç†<br>
                        â€¢ å®¹æ˜“å‡ºç°æ»šåŠ¨ä½ç½®é”™ä¹±
                    </div>
                </div>
                <div class="new-way">
                    <div class="way-title">âœ… æ–°æ–¹å¼</div>
                    <div class="way-description">
                        â€¢ æ¯ä¸ªä¼šè¯ç‹¬ç«‹çš„ConversationView<br>
                        â€¢ åˆ‡æ¢æ—¶åªæ”¹å˜å¯è§æ€§<br>
                        â€¢ æµè§ˆå™¨è‡ªåŠ¨ç»´æŠ¤æ»šåŠ¨ä½ç½®<br>
                        â€¢ ç®€å•çš„çŠ¶æ€ç®¡ç†<br>
                        â€¢ æ»šåŠ¨ä½ç½®å¤©ç„¶ä¿æŒ
                    </div>
                </div>
            </div>
        </div>
        
        <div class="architecture-section">
            <div class="section-title">
                ğŸ—ï¸ ç»„ä»¶ç»“æ„
            </div>
            <div class="code-block">
App.tsx
â”œâ”€â”€ ConversationContainer
    â”œâ”€â”€ ConversationView (ä¼šè¯1) - display: flex
    â”œâ”€â”€ ConversationView (ä¼šè¯2) - display: none  
    â”œâ”€â”€ ConversationView (ä¼šè¯3) - display: none
    â””â”€â”€ WelcomeView (å½“æ²¡æœ‰é€‰ä¸­ä¼šè¯æ—¶)

æ¯ä¸ªConversationViewåŒ…å«:
â”œâ”€â”€ ChatHeader
â”œâ”€â”€ MessageListSimple (ç®€åŒ–ç‰ˆï¼Œæ— å¤æ‚æ»šåŠ¨é€»è¾‘)
â””â”€â”€ MessageInput
            </div>
        </div>
        
        <div class="architecture-section">
            <div class="section-title">
                ğŸ’¡ å…³é”®å®ç°ç»†èŠ‚
            </div>
            <div class="code-block">
// ConversationView.tsx - æ¯ä¸ªä¼šè¯çš„ç‹¬ç«‹ç»„ä»¶
const Container = styled.div&lt;{ $isVisible: boolean }&gt;`
  flex: 1;
  display: ${props => props.$isVisible ? 'flex' : 'none'};
  // ... å…¶ä»–æ ·å¼
`;

// åªæœ‰å¯è§çš„ä¼šè¯ç»„ä»¶ä¼šæ¸²æŸ“ï¼Œå…¶ä»–éšè—ä½†ä¿æŒDOMçŠ¶æ€
&lt;ConversationView
  key={conversation.conversation_id}  // å…³é”®ï¼šç¨³å®šçš„key
  isVisible={conversation.conversation_id === selectedConversationId}
  // ... å…¶ä»–props
/&gt;
            </div>
        </div>
        
        <div class="test-steps">
            <div class="test-title">ğŸ§ª æµ‹è¯•æ­¥éª¤</div>
            <div class="test-step">å¯åŠ¨åº”ç”¨å¹¶ç™»å½•</div>
            <div class="test-step">é€‰æ‹©ç¬¬ä¸€ä¸ªä¼šè¯ï¼Œæ»šåŠ¨åˆ°ä¸­é—´ä½ç½®</div>
            <div class="test-step">åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªä¼šè¯ï¼Œæ»šåŠ¨åˆ°ä¸åŒä½ç½®</div>
            <div class="test-step">å†åˆ‡æ¢å›ç¬¬ä¸€ä¸ªä¼šè¯</div>
            <div class="test-step">éªŒè¯æ»šåŠ¨ä½ç½®æ˜¯å¦å®Œç¾ä¿æŒ</div>
            <div class="test-step">å‘é€æ–°æ¶ˆæ¯ï¼ŒéªŒè¯æ˜¯å¦è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨</div>
        </div>
        
        <div class="architecture-section">
            <div class="section-title">
                ğŸ‰ é¢„æœŸæ•ˆæœ
            </div>
            <div class="benefit">åˆ‡æ¢ä¼šè¯æ—¶æ»šåŠ¨ä½ç½®å®Œç¾ä¿æŒ</div>
            <div class="benefit">ä¸å†æœ‰æ»šåŠ¨è·³è·ƒæˆ–ä½ç½®é”™ä¹±</div>
            <div class="benefit">æ–°æ¶ˆæ¯è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨</div>
            <div class="benefit">æ¯ä¸ªä¼šè¯çš„è¾“å…¥çŠ¶æ€ç‹¬ç«‹ä¿æŒ</div>
            <div class="benefit">æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒ</div>
        </div>
        
        <div class="architecture-section">
            <div class="section-title">
                âš¡ æ€§èƒ½ä¼˜åŠ¿
            </div>
            <div class="benefit">å‡å°‘äº†DOMé‡æ–°æ¸²æŸ“</div>
            <div class="benefit">æ¶ˆé™¤äº†å¤æ‚çš„æ»šåŠ¨ä½ç½®è®¡ç®—</div>
            <div class="benefit">æ›´å°‘çš„JavaScriptæ‰§è¡Œ</div>
            <div class="benefit">æµè§ˆå™¨åŸç”Ÿä¼˜åŒ–çš„æ»šåŠ¨å¤„ç†</div>
            <div class="benefit">å†…å­˜ä½¿ç”¨æ›´ç¨³å®š</div>
        </div>
    </div>
</body>
</html> 
# ç»„ä»¶å±‚æ¶æ„æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

ç»„ä»¶å±‚æ˜¯Cherryåº”ç”¨çš„UIå±•ç¤ºå±‚ï¼Œé‡‡ç”¨Reactå‡½æ•°å¼ç»„ä»¶å’ŒTypeScriptï¼Œç»“åˆStyled Componentså®ç°æ ·å¼ç®¡ç†ã€‚ç»„ä»¶æŒ‰åŠŸèƒ½åŸŸç»„ç»‡ï¼Œæ”¯æŒå¯å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ç»„ä»¶å±‚æ¬¡ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Component Layer                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Page          â”‚  â”‚   Feature       â”‚  â”‚   UI            â”‚ â”‚
â”‚  â”‚  Components     â”‚  â”‚  Components     â”‚  â”‚  Components     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Layout        â”‚  â”‚   Business      â”‚  â”‚   Utility       â”‚ â”‚
â”‚  â”‚  Components     â”‚  â”‚  Components     â”‚  â”‚  Components     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡åŸåˆ™

1. **ç»„ä»¶åŒ–**: æ¯ä¸ªç»„ä»¶èŒè´£å•ä¸€ï¼Œå¯ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•
2. **å¯å¤ç”¨æ€§**: åŸºç¡€ç»„ä»¶å¯åœ¨å¤šä¸ªåœ°æ–¹å¤ç”¨
3. **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
4. **æ ·å¼éš”ç¦»**: ä½¿ç”¨Styled Componentsé¿å…æ ·å¼å†²çª
5. **æ€§èƒ½ä¼˜åŒ–**: åˆç†çš„ç»„ä»¶æ‹†åˆ†å’ŒçŠ¶æ€ç®¡ç†

## ğŸ“ ç›®å½•ç»“æ„

```
components/
â”œâ”€â”€ README.md                 # æœ¬æ–‡æ¡£
â”œâ”€â”€ UI/                      # åŸºç¡€UIç»„ä»¶
â”‚   â”œâ”€â”€ index.ts            # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ Avatar.tsx          # å¤´åƒç»„ä»¶
â”‚   â”œâ”€â”€ Button.tsx          # æŒ‰é’®ç»„ä»¶
â”‚   â”œâ”€â”€ EmptyState.tsx      # ç©ºçŠ¶æ€ç»„ä»¶
â”‚   â”œâ”€â”€ ErrorMessage.tsx    # é”™è¯¯ä¿¡æ¯ç»„ä»¶
â”‚   â”œâ”€â”€ LoadingSpinner.tsx  # åŠ è½½åŠ¨ç”»ç»„ä»¶
â”‚   â””â”€â”€ QuickEmojiReply.tsx # å¿«é€Ÿè¡¨æƒ…å›å¤ç»„ä»¶
â”œâ”€â”€ ContactPage/            # è”ç³»äººé¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ index.tsx          # é¡µé¢å…¥å£
â”‚   â”œâ”€â”€ ContactGroup.tsx   # è”ç³»äººåˆ†ç»„
â”‚   â”œâ”€â”€ ContactItem.tsx    # è”ç³»äººé¡¹
â”‚   â”œâ”€â”€ ContactProfileModal.tsx # è”ç³»äººèµ„æ–™æ¨¡æ€æ¡†
â”‚   â””â”€â”€ GroupSection.tsx   # ç¾¤ç»„åŒºåŸŸ
â”œâ”€â”€ settings/              # è®¾ç½®é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ SettingsPage.tsx   # è®¾ç½®é¡µé¢
â”‚   â”œâ”€â”€ GeneralSettings.tsx # é€šç”¨è®¾ç½®
â”‚   â”œâ”€â”€ PrivacySettings.tsx # éšç§è®¾ç½®
â”‚   â”œâ”€â”€ NotificationSettings.tsx # é€šçŸ¥è®¾ç½®
â”‚   â””â”€â”€ AppearanceSettings.tsx # å¤–è§‚è®¾ç½®
â”œâ”€â”€ login/                 # ç™»å½•ç»„ä»¶
â”œâ”€â”€ App.tsx               # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ Sidebar.tsx           # ä¾§è¾¹æ 
â”œâ”€â”€ ChatHeader.tsx        # èŠå¤©å¤´éƒ¨
â”œâ”€â”€ ConversationView.tsx  # ä¼šè¯è§†å›¾
â”œâ”€â”€ MessageListSimple.tsx # æ¶ˆæ¯åˆ—è¡¨
â”œâ”€â”€ MessageInput.tsx      # æ¶ˆæ¯è¾“å…¥
â”œâ”€â”€ ContactList.tsx       # è”ç³»äººåˆ—è¡¨
â”œâ”€â”€ StatusBar.tsx         # çŠ¶æ€æ 
â”œâ”€â”€ WindowControls.tsx    # çª—å£æ§åˆ¶
â”œâ”€â”€ NotificationManager.tsx # é€šçŸ¥ç®¡ç†
â”œâ”€â”€ NotificationToast.tsx # é€šçŸ¥æç¤º
â”œâ”€â”€ EmojiPicker.tsx       # è¡¨æƒ…é€‰æ‹©å™¨
â”œâ”€â”€ ImageUploader.tsx     # å›¾ç‰‡ä¸Šä¼ 
â”œâ”€â”€ ImageMessage.tsx      # å›¾ç‰‡æ¶ˆæ¯
â”œâ”€â”€ ReplyMessage.tsx      # å›å¤æ¶ˆæ¯
â”œâ”€â”€ MessageDebug.tsx      # æ¶ˆæ¯è°ƒè¯•
â”œâ”€â”€ DebugPanel.tsx        # è°ƒè¯•é¢æ¿
â””â”€â”€ ...                   # å…¶ä»–ç»„ä»¶
```

## ğŸ”§ ç»„ä»¶è§„èŒƒ

### ç»„ä»¶ç»“æ„æ¨¡æ¿

```typescript
// å¯¼å…¥ä¾èµ–
import React from 'react';
import styled from 'styled-components';
import { ComponentProps } from '@/types';

// æ ·å¼å®šä¹‰
const Container = styled.div`
  // æ ·å¼å®šä¹‰
`;

const Title = styled.h1`
  // æ ·å¼å®šä¹‰
`;

// ç»„ä»¶æ¥å£
interface ComponentNameProps {
  title: string;
  onAction?: () => void;
  children?: React.ReactNode;
}

// ç»„ä»¶å®ç°
const ComponentName: React.FC<ComponentNameProps> = ({
  title,
  onAction,
  children
}) => {
  // çŠ¶æ€ç®¡ç†
  const [state, setState] = React.useState();

  // äº‹ä»¶å¤„ç†
  const handleClick = () => {
    onAction?.();
  };

  // æ¸²æŸ“
  return (
    <Container>
      <Title>{title}</Title>
      {children}
    </Container>
  );
};

// é»˜è®¤å¯¼å‡º
export default ComponentName;
```

### Propsè§„èŒƒ

```typescript
// åŸºç¡€Propsæ¥å£
interface BaseComponentProps {
  className?: string;
  style?: React.CSSProperties;
  children?: React.ReactNode;
}

// æ‰©å±•Propsæ¥å£
interface ExtendedComponentProps extends BaseComponentProps {
  // ç‰¹å®šå±æ€§
  variant?: 'primary' | 'secondary';
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
  loading?: boolean;
}

// äº‹ä»¶å¤„ç†Props
interface EventComponentProps {
  onClick?: () => void;
  onChange?: (value: string) => void;
  onSubmit?: (data: FormData) => void;
}
```

### æ ·å¼è§„èŒƒ

```typescript
// ä½¿ç”¨Styled Components
const StyledComponent = styled.div<{ $variant: string }>`
  // åŸºç¡€æ ·å¼
  display: flex;
  align-items: center;
  justify-content: center;
  
  // æ¡ä»¶æ ·å¼
  background-color: ${props => 
    props.$variant === 'primary' ? '#007bff' : '#6c757d'
  };
  
  // å“åº”å¼æ ·å¼
  @media (max-width: 768px) {
    flex-direction: column;
  }
  
  // ä¸»é¢˜æ ·å¼
  ${props => props.theme.colors.primary};
`;

// ä½¿ç”¨CSSå˜é‡
const ThemedComponent = styled.div`
  color: var(--text-color);
  background: var(--bg-color);
  border: 1px solid var(--border-color);
`;
```

## ğŸ“Š ç»„ä»¶åˆ†ç±»

### åŸºç¡€UIç»„ä»¶ (UI/)

#### Avatar - å¤´åƒç»„ä»¶
**èŒè´£**: æ˜¾ç¤ºç”¨æˆ·å¤´åƒï¼Œæ”¯æŒä¸åŒå°ºå¯¸å’ŒçŠ¶æ€

**Props**:
```typescript
interface AvatarProps {
  src?: string;
  alt?: string;
  size?: number | 'small' | 'medium' | 'large';
  shape?: 'circle' | 'square';
  status?: 'online' | 'offline' | 'busy' | 'away';
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
<Avatar 
  src="user-avatar.jpg" 
  alt="User Name" 
  size="medium" 
  status="online" 
/>
```

#### Button - æŒ‰é’®ç»„ä»¶
**èŒè´£**: é€šç”¨æŒ‰é’®ç»„ä»¶ï¼Œæ”¯æŒå¤šç§æ ·å¼å’ŒçŠ¶æ€

**Props**:
```typescript
interface ButtonProps {
  type?: 'primary' | 'secondary' | 'danger' | 'ghost' | 'link';
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
  loading?: boolean;
  onClick?: () => void;
  htmlType?: 'button' | 'submit' | 'reset';
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
<Button 
  type="primary" 
  size="medium" 
  onClick={handleClick}
  loading={isLoading}
>
  Click Me
</Button>
```

#### LoadingSpinner - åŠ è½½åŠ¨ç”»
**èŒè´£**: æ˜¾ç¤ºåŠ è½½çŠ¶æ€

**Props**:
```typescript
interface LoadingSpinnerProps {
  size?: 'small' | 'medium' | 'large';
  color?: string;
  text?: string;
}
```

### é¡µé¢ç»„ä»¶

#### ContactPage - è”ç³»äººé¡µé¢
**èŒè´£**: è”ç³»äººç®¡ç†é¡µé¢ï¼ŒåŒ…å«è”ç³»äººåˆ—è¡¨ã€æœç´¢ã€åˆ†ç»„ç­‰åŠŸèƒ½

**ç»„ä»¶ç»“æ„**:
```
ContactPage/
â”œâ”€â”€ index.tsx              # é¡µé¢å…¥å£
â”œâ”€â”€ ContactGroup.tsx       # è”ç³»äººåˆ†ç»„
â”œâ”€â”€ ContactItem.tsx        # è”ç³»äººé¡¹
â”œâ”€â”€ ContactProfileModal.tsx # è”ç³»äººèµ„æ–™æ¨¡æ€æ¡†
â””â”€â”€ GroupSection.tsx       # ç¾¤ç»„åŒºåŸŸ
```

**åŠŸèƒ½ç‰¹æ€§**:
- è”ç³»äººåˆ—è¡¨å±•ç¤º
- æŒ‰å­—æ¯åˆ†ç»„
- æœç´¢åŠŸèƒ½
- ç¾¤ç»„ç®¡ç†
- è”ç³»äººè¯¦æƒ…

#### SettingsPage - è®¾ç½®é¡µé¢
**èŒè´£**: åº”ç”¨è®¾ç½®é¡µé¢ï¼ŒåŒ…å«å„ç§é…ç½®é€‰é¡¹

**ç»„ä»¶ç»“æ„**:
```
settings/
â”œâ”€â”€ SettingsPage.tsx       # è®¾ç½®é¡µé¢ä¸»ç»„ä»¶
â”œâ”€â”€ GeneralSettings.tsx    # é€šç”¨è®¾ç½®
â”œâ”€â”€ PrivacySettings.tsx    # éšç§è®¾ç½®
â”œâ”€â”€ NotificationSettings.tsx # é€šçŸ¥è®¾ç½®
â””â”€â”€ AppearanceSettings.tsx # å¤–è§‚è®¾ç½®
```

**åŠŸèƒ½ç‰¹æ€§**:
- è®¾ç½®åˆ†ç±»å¯¼èˆª
- è¡¨å•éªŒè¯
- å®æ—¶ä¿å­˜
- ä¸»é¢˜åˆ‡æ¢

### åŠŸèƒ½ç»„ä»¶

#### MessageInput - æ¶ˆæ¯è¾“å…¥
**èŒè´£**: æ¶ˆæ¯è¾“å…¥ç»„ä»¶ï¼Œæ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€è¡¨æƒ…ç­‰å¤šç§è¾“å…¥æ–¹å¼

**Props**:
```typescript
interface MessageInputProps {
  conversationId: string;
  onSend?: (message: Message) => void;
  placeholder?: string;
  disabled?: boolean;
}
```

**åŠŸèƒ½ç‰¹æ€§**:
- æ–‡æœ¬è¾“å…¥
- å›¾ç‰‡ä¸Šä¼ 
- è¡¨æƒ…é€‰æ‹©
- å›å¤æ¶ˆæ¯
- å¿«æ·é”®æ”¯æŒ

#### MessageList - æ¶ˆæ¯åˆ—è¡¨
**èŒè´£**: æ¶ˆæ¯åˆ—è¡¨å±•ç¤ºï¼Œæ”¯æŒæ»šåŠ¨åŠ è½½ã€æ¶ˆæ¯çŠ¶æ€ç­‰

**Props**:
```typescript
interface MessageListProps {
  messages: Message[];
  conversationId: string;
  onLoadMore?: () => void;
  onMessageClick?: (message: Message) => void;
}
```

**åŠŸèƒ½ç‰¹æ€§**:
- æ¶ˆæ¯æ¸²æŸ“
- æ»šåŠ¨åŠ è½½
- æ¶ˆæ¯çŠ¶æ€
- æ—¶é—´åˆ†ç»„
- æ¶ˆæ¯æ“ä½œ

#### EmojiPicker - è¡¨æƒ…é€‰æ‹©å™¨
**èŒè´£**: è¡¨æƒ…é€‰æ‹©ç»„ä»¶ï¼Œæ”¯æŒè¡¨æƒ…åˆ†ç±»å’Œæœç´¢

**Props**:
```typescript
interface EmojiPickerProps {
  onSelect?: (emoji: string) => void;
  visible?: boolean;
  onClose?: () => void;
}
```

## ğŸ”„ ç»„ä»¶é€šä¿¡

### Propsä¼ é€’
```typescript
// çˆ¶ç»„ä»¶
const ParentComponent = () => {
  const handleAction = (data: any) => {
    // å¤„ç†å­ç»„ä»¶äº‹ä»¶
  };

  return (
    <ChildComponent 
      data={someData} 
      onAction={handleAction} 
    />
  );
};

// å­ç»„ä»¶
const ChildComponent: React.FC<ChildComponentProps> = ({
  data,
  onAction
}) => {
  const handleClick = () => {
    onAction?.(data);
  };

  return <button onClick={handleClick}>Click</button>;
};
```

### Contextä½¿ç”¨
```typescript
// åˆ›å»ºContext
const ThemeContext = React.createContext<ThemeContextType>({});

// Providerç»„ä»¶
const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [theme, setTheme] = React.useState('light');

  return (
    <ThemeContext.Provider value={{ theme, setTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};

// ä½¿ç”¨Context
const ThemedComponent = () => {
  const { theme, setTheme } = React.useContext(ThemeContext);
  
  return (
    <div className={theme}>
      <button onClick={() => setTheme('dark')}>
        Switch Theme
      </button>
    </div>
  );
};
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### åˆ›å»ºæ–°ç»„ä»¶

1. **åˆ›å»ºç»„ä»¶æ–‡ä»¶**:
```bash
touch src/components/NewComponent.tsx
```

2. **å®šä¹‰ç»„ä»¶æ¥å£**:
```typescript
interface NewComponentProps {
  title: string;
  onAction?: () => void;
}
```

3. **å®ç°ç»„ä»¶**:
```typescript
const NewComponent: React.FC<NewComponentProps> = ({
  title,
  onAction
}) => {
  return (
    <div>
      <h1>{title}</h1>
      <button onClick={onAction}>Action</button>
    </div>
  );
};
```

4. **æ·»åŠ æ ·å¼**:
```typescript
const Container = styled.div`
  padding: 16px;
  border: 1px solid #ccc;
  border-radius: 8px;
`;
```

5. **å¯¼å‡ºç»„ä»¶**:
```typescript
export default NewComponent;
```

### ç»„ä»¶æµ‹è¯•

```typescript
import { render, screen, fireEvent } from '@testing-library/react';
import NewComponent from './NewComponent';

describe('NewComponent', () => {
  it('should render title', () => {
    render(<NewComponent title="Test Title" />);
    expect(screen.getByText('Test Title')).toBeInTheDocument();
  });

  it('should call onAction when button clicked', () => {
    const mockAction = jest.fn();
    render(<NewComponent title="Test" onAction={mockAction} />);
    
    fireEvent.click(screen.getByText('Action'));
    expect(mockAction).toHaveBeenCalled();
  });
});
```

### ç»„ä»¶æ–‡æ¡£

```typescript
/**
 * NewComponent - æ–°ç»„ä»¶
 * 
 * ç”¨äºæ˜¾ç¤ºå’Œå¤„ç†ç‰¹å®šåŠŸèƒ½çš„ç»„ä»¶
 * 
 * @example
 * ```tsx
 * <NewComponent 
 *   title="Hello World" 
 *   onAction={() => console.log('clicked')} 
 * />
 * ```
 */
const NewComponent: React.FC<NewComponentProps> = ({ ... }) => {
  // ç»„ä»¶å®ç°
};
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç»„ä»¶æ‹†åˆ†
- æŒ‰åŠŸèƒ½æ‹†åˆ†å¤§å‹ç»„ä»¶
- æå–å¯å¤ç”¨çš„å­ç»„ä»¶
- ä½¿ç”¨React.memoä¼˜åŒ–æ¸²æŸ“

### çŠ¶æ€ç®¡ç†
- åˆç†ä½¿ç”¨useStateå’ŒuseEffect
- é¿å…ä¸å¿…è¦çš„çŠ¶æ€æ›´æ–°
- ä½¿ç”¨useCallbackå’ŒuseMemo

### æ‡’åŠ è½½
```typescript
// æ‡’åŠ è½½ç»„ä»¶
const LazyComponent = React.lazy(() => import('./LazyComponent'));

// ä½¿ç”¨Suspense
<Suspense fallback={<LoadingSpinner />}>
  <LazyComponent />
</Suspense>
```

## ğŸ”® æ‰©å±•æ€§

### ä¸»é¢˜ç³»ç»Ÿ
- æ”¯æŒåŠ¨æ€ä¸»é¢˜åˆ‡æ¢
- ä½¿ç”¨CSSå˜é‡å’ŒStyled Components
- ä¸»é¢˜é…ç½®æŒä¹…åŒ–

### å›½é™…åŒ–
- æ”¯æŒå¤šè¯­è¨€
- åŠ¨æ€è¯­è¨€åˆ‡æ¢
- æœ¬åœ°åŒ–èµ„æºç®¡ç†

### æ’ä»¶ç³»ç»Ÿ
- ç»„ä»¶æ’ä»¶æ¥å£
- åŠ¨æ€ç»„ä»¶åŠ è½½
- è‡ªå®šä¹‰ç»„ä»¶æ³¨å†Œ

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2025-07-13  
**ç»´æŠ¤è€…**: Cherry Team 